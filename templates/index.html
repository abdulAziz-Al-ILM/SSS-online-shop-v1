<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>SSS Market</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body>
    <div id="app-container">
        <header>
            <div class="logo">SSS SHOP</div>
            <div class="cart-btn" onclick="openCartModal()">
                <i class="ri-shopping-bag-3-fill"></i>
                <span id="cart-badge" class="hidden">0</span>
            </div>
        </header>

        <div class="search-container">
            <input type="text" id="search" placeholder="Mahsulotlarni qidirish..." onkeyup="filterProducts()">
        </div>

        <div id="products-grid" class="grid"></div>
    </div>

    <div id="product-modal" class="modal hidden">
        <div class="modal-content full-height">
            <div class="modal-top">
                <button class="close-btn" onclick="closeProductModal()"><i class="ri-arrow-down-s-line"></i></button>
            </div>
            <div id="pm-body">
                <img id="pm-img" src="" alt="">
                <div class="pm-info">
                    <h2 id="pm-title">Product Name</h2>
                    <p id="pm-price" class="price">0 so'm</p>
                    <div id="pm-tags" class="tags-container"></div>
                    <p id="pm-desc" class="description">Description goes here...</p>
                </div>
            </div>
            <div class="pm-footer">
                <div class="quantity-control">
                    <button onclick="changeModalQty(-1)">-</button>
                    <input type="number" id="pm-qty" value="1" min="1" oninput="validQty(this)">
                    <button onclick="changeModalQty(1)">+</button>
                </div>
                <button class="add-btn" onclick="addToCartFromModal()">Savatga qo'shish</button>
            </div>
        </div>
    </div>

    <div id="cart-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Savat <span id="cart-total-items"></span></h3>
                <i class="ri-close-line" onclick="closeCartModal()"></i>
            </div>
            <div id="cart-items-list"></div>
            <div class="cart-checkout">
                <div class="total-row">
                    <span>Jami:</span>
                    <span id="cart-total-price">0 so'm</span>
                </div>
                <button class="checkout-btn" onclick="openCheckout()">Rasmiylashtirish</button>
            </div>
        </div>
    </div>

    <div id="checkout-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Buyurtma berish</h3>
            <form id="order-form" onsubmit="event.preventDefault(); submitOrder();">
                <div class="form-group">
                    <label>Yetkazib berish turi:</label>
                    <div class="radio-group">
                        <label class="radio-card">
                            <input type="radio" name="delivery" value="pickup" checked onchange="updatePaymentMethods()">
                            <span>O'zim olib ketaman</span>
                        </label>
                        <label class="radio-card">
                            <input type="radio" name="delivery" value="taxi" onchange="updatePaymentMethods()">
                            <span>Taksi (Yetkazib berish)</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>To'lov turi:</label>
                    <select id="payment-method">
                        <option value="cash">Naqd</option>
                        <option value="card">Karta orqali</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Telefon raqam:</label>
                    <input type="tel" id="phone" placeholder="+996..." required>
                </div>

                <button type="submit" class="confirm-btn">Tasdiqlash</button>
            </form>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
